<!doctype html>

<html lang="en">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAqHNnB3aN5C2MZG2fTK6P9zamY3F5kwwU",
        authDomain: "cleanapp-a4422.firebaseapp.com",
        databaseURL: "https://cleanapp-a4422.firebaseio.com",
        storageBucket: "cleanapp-a4422.appspot.com",
      };
      firebase.initializeApp(config);

      var database = firebase.database.Reference;
      function makePosts() {
        //This is what the documentation says, but obviously this isn't working
        console.log(firebase.database().ref('posts'));
      }
      var provider = new firebase.auth.GoogleAuthProvider();
      //Add the scope
      provider.addScope('https://www.googleapis.com/auth/plus.login');
      console.log("Current user:");
      try {
        console.log(firebase.auth().currentUser.uid);
      } catch(error) {
        firebase.auth().signInWithRedirect(provider).then(function(result) {
          var token = result.credential.accessToken;
          var user = result.user;
          console.log("Login success");
        }).catch(function(error) {
          var errorCode = error.code;
          var errorMessage = error.message;
        });
      }

      /*
      if (!firebase.auth().currentUser) {
        firebase.auth().signInWithRedirect(provider).then(function(result) {
          var token = result.credential.accessToken;
          var user = result.user;
          console.log("Login success");
        }).catch(function(error) {
          var errorCode = error.code;
          var errorMessage = error.message;
        });
      }
      */
      makePosts();
    </script>
  </head>
  <body>
    <h1>LAAL YEEY</h1>
  </body>
</html>
